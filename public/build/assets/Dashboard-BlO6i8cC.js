import{r as x,j as e,u as A,b as U,H as K}from"./app-D1eMK3SZ.js";import{L as F,A as H}from"./AuthenticatedLayout-DeM13BqC.js";import{X as q,F as J,D as S,c as y,C as O,g as G,T as V,a as X,f as M,b as Y,d as Q}from"./budget-B78iKhM-.js";import{c as j}from"./piggy-bank-CvFCs0x6.js";import{M as $}from"./mail-ChhSFwu7.js";import{U as z}from"./user-pOpDKKC7.js";import{T as W}from"./trash-2-DRPyXFvi.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ee=j("copy",Z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],R=j("crown",se);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],te=j("ellipsis-vertical",ae);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],le=j("key",ne);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ie=j("log-in",re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],D=j("plus",ce);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],de=j("refresh-cw",oe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],B=j("shield",me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ue=j("user-minus",xe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],I=j("users",he),_=({isOpen:l,onClose:i,title:t,children:c,size:h="small",showCloseButton:n=!0})=>{const a=x.useRef(null);x.useEffect(()=>{const d=b=>{b.key==="Escape"&&l&&i()};return l&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[l,i]);const m=d=>{a.current&&!a.current.contains(d.target)&&i()};if(!l)return null;const o={small:"max-w-md",large:"max-w-4xl"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:m,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{ref:a,className:`bg-base-100 rounded-lg shadow-xl w-full ${o[h]} max-h-[90vh] flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-base-300",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-semibold",children:t}),n&&e.jsx("button",{onClick:i,className:"btn btn-ghost btn-sm btn-circle","aria-label":"Close modal",children:e.jsx(q,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c})]})})};function be({isOpen:l,onClose:i}){const{data:t,setData:c,post:h,processing:n,errors:a,reset:m}=A({name:"",description:"",budget:void 0}),[o,d]=x.useState(!1),b=u=>{u.preventDefault(),console.log("Creating book with data:",t),m(),i()},g=()=>{m(),i()};return e.jsx(_,{isOpen:l,onClose:g,title:"Buat Buku Keuangan",size:"small",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Nama Buku"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"contoh: Anggaran Keluarga 2024",className:`input input-bordered w-full pl-10 ${a.name?"input-error":""}`,value:t.name,onChange:u=>c("name",u.target.value),required:!0}),e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-base-content/40",size:18})]}),a.name&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.name})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Deskripsi"})}),e.jsx("textarea",{className:`textarea textarea-bordered w-full ${a.description?"textarea-error":""}`,placeholder:"Deskripsi singkat buku keuangan ini...",value:t.description,onChange:u=>c("description",u.target.value),rows:3}),a.description&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.description})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label",children:[e.jsxs("span",{className:"label-text font-medium flex items-center gap-2",children:[e.jsx(S,{size:16}),"Atur Anggaran Bulanan"]}),e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:o,onChange:u=>d(u.target.checked)})]})}),o&&e.jsxs("div",{className:"form-control",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"Masukkan jumlah anggaran",className:`input input-bordered w-full pl-8 ${a.budget?"input-error":""}`,value:t.budget||"",onChange:u=>c("budget",u.target.value?Number(u.target.value):void 0),min:"0",step:"0.01"}),e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-base-content/60",children:"Rp"})]}),a.budget&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.budget})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:g,children:"Batal"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:n,children:[n&&e.jsx("span",{className:"loading loading-spinner loading-sm"}),"Buat Buku"]})]})]})})}function pe({isOpen:l,onClose:i}){const{data:t,setData:c,post:h,processing:n,errors:a,reset:m}=A({invitation_code:""}),o=b=>{b.preventDefault(),console.log("Joining book with code:",t.invitation_code),m(),i()},d=()=>{m(),i()};return e.jsx(_,{isOpen:l,onClose:d,title:"Gabung Buku Keuangan",size:"small",children:e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Kode Undangan"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Masukkan kode undangan",className:`input input-bordered w-full pl-10 uppercase ${a.invitation_code?"input-error":""}`,value:t.invitation_code,onChange:b=>c("invitation_code",b.target.value.toUpperCase()),maxLength:8,required:!0}),e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-base-content/40",size:18})]}),a.invitation_code&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.invitation_code})}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-base-content/60",children:"Masukkan kode 8 karakter yang diberikan oleh admin buku"})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:d,children:"Batal"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:n||t.invitation_code.length<8,children:[n&&e.jsx("span",{className:"loading loading-spinner loading-sm"}),"Gabung"]})]})]})})}function je({isOpen:l,onClose:i,book:t}){const[c,h]=x.useState(null),[n,a]=x.useState(null),[m,o]=x.useState(!1),[d,b]=x.useState(!1),g=(r,p)=>{h(r),a(p)},u=()=>{!c||!n||(console.log(`${n} member:`,c.user.name),h(null),a(null))},N=t&&t.members.find(r=>r.user.id===y.id)?.role||"member",v=N==="creator"||N==="admin",k=N==="creator",w=async r=>{try{await navigator.clipboard.writeText(r),o(!0),setTimeout(()=>o(!1),2e3)}catch(p){console.error("Failed to copy: ",p)}},C=async()=>{b(!0),setTimeout(()=>{console.log("Regenerating invitation code for book:",t?.id),b(!1)},1e3)},s=()=>{if(!t)return;const r=`Join "${t.name}" on CasFam`,p=`Hi! I'd like to invite you to collaborate on "${t.name}" in CasFam.

Use this invitation code: ${t.invitation_code}

Open CasFam and use the Join feature, then enter the code above to join our book.`;window.location.href=`mailto:?subject=${encodeURIComponent(r)}&body=${encodeURIComponent(p)}`},f=r=>{switch(r){case"creator":return e.jsx(R,{size:16,className:"text-primary"});case"admin":return e.jsx(B,{size:16,className:"text-secondary"});default:return e.jsx(z,{size:16,className:"text-base-content/60"})}},T=r=>{switch(r){case"creator":return"badge-primary";case"admin":return"badge-secondary";default:return"badge-neutral"}};return t?e.jsx(_,{isOpen:l,onClose:i,title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:20}),"Members (",t.members.length,")"]}),size:"large",children:c&&n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`alert ${n==="remove"?"alert-error":"alert-warning"}`,children:e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[n==="promote"&&"Promote to Admin",n==="demote"&&"Remove Admin Rights",n==="remove"&&"Remove Member"]}),e.jsxs("p",{className:"text-sm",children:[n==="promote"&&`Give ${c.user.name} admin rights to manage this book?`,n==="demote"&&`Remove admin rights from ${c.user.name}?`,n==="remove"&&`Remove ${c.user.name} from this financial book? They will lose access to all transactions and data.`]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>{h(null),a(null)},children:"Cancel"}),e.jsxs("button",{className:`btn ${n==="remove"?"btn-error":"btn-warning"}`,onClick:u,children:[n==="promote"&&"Promote",n==="demote"&&"Demote",n==="remove"&&"Remove"]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card bg-base-200",children:e.jsx("div",{className:"card-body p-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-base-content/60",children:"Manage who can access this book"})]})})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Invitation Code"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 input input-bordered font-mono text-lg text-center bg-primary/10 text-primary font-bold",children:t.invitation_code}),e.jsx("button",{className:"btn btn-square btn-outline",onClick:C,disabled:d,title:"Regenerate code",children:e.jsx(de,{size:18,className:d?"animate-spin":""})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:`btn btn-outline gap-2 ${m?"btn-success":""}`,onClick:()=>w(t.invitation_code),children:[m?e.jsx(O,{size:18}):e.jsx(ee,{size:18}),"Copy Code"]}),e.jsxs("button",{className:"btn btn-outline gap-2",onClick:s,children:[e.jsx($,{size:18}),"Email Invite"]})]}),e.jsx("p",{className:"text-sm text-base-content/60",children:"Share this code with people you want to invite. Anyone with this code can join until you regenerate it."})]}),e.jsx("div",{className:"space-y-3",children:t.members.map(r=>{const p=r.user.id===y.id,L=v&&!p&&r.role!=="creator",P=k&&r.role==="member"&&!p,E=k&&r.role==="admin"&&!p;return e.jsx("div",{className:"card bg-base-100 border",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"avatar placeholder",children:e.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-12",children:e.jsx("span",{className:"text-sm",children:r.user.name.charAt(0)})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h4",{className:"font-semibold",children:[r.user.name,p&&" (You)"]}),f(r.role)]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-base-content/60",children:[e.jsx($,{size:14}),r.user.email]}),e.jsxs("p",{className:"text-xs text-base-content/50",children:["Joined ",new Date(r.joined_at).toLocaleDateString()]})]}),e.jsx("div",{className:`badge ${T(r.role)}`,children:r.role})]}),L&&e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-sm btn-circle",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),e.jsxs("ul",{className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-48",children:[P&&e.jsx("li",{children:e.jsxs("a",{onClick:()=>g(r,"promote"),children:[e.jsx(B,{size:16}),"Promote to Admin"]})}),E&&e.jsx("li",{children:e.jsxs("a",{onClick:()=>g(r,"demote"),children:[e.jsx(z,{size:16}),"Remove Admin Rights"]})}),e.jsx("li",{children:e.jsxs("a",{onClick:()=>g(r,"remove"),className:"text-error",children:[e.jsx(ue,{size:16}),"Remove Member"]})})]})]})]})})},r.id)})}),e.jsx("div",{className:"card bg-base-200",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Role Permissions"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:16,className:"text-primary"}),e.jsx("span",{className:"font-medium",children:"Creator:"}),e.jsx("span",{className:"text-base-content/70",children:"Full control, can't be removed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:16,className:"text-secondary"}),e.jsx("span",{className:"font-medium",children:"Admin:"}),e.jsx("span",{className:"text-base-content/70",children:"Manage members, approve transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:16,className:"text-base-content/60"}),e.jsx("span",{className:"font-medium",children:"Member:"}),e.jsx("span",{className:"text-base-content/70",children:"Add transactions, view data"})]})]})]})}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx("button",{className:"btn btn-primary",onClick:i,children:"Done"})})]})}):null}const ge=({book:l,currentUserId:i,transactions:t,onManageMembers:c,onLeave:h,onDelete:n})=>{const a=x.useMemo(()=>l.members.find(s=>s.user.id===i)?.role,[l.members,i]),m=x.useMemo(()=>t.filter(s=>s.book_id===l.id&&s.status==="approved"),[t,l.id]),{income:o,expense:d}=x.useMemo(()=>m.reduce((s,f)=>(f.type==="income"?s.income+=f.amount:f.type==="expense"&&(s.expense+=f.amount),s),{income:0,expense:0}),[m]),b=x.useMemo(()=>G(d,l.budget),[d,l.budget]),g=x.useMemo(()=>[{key:"income",label:"Income",icon:V,value:o,colorClass:"text-success"},{key:"expense",label:"Expense",icon:X,value:d,colorClass:"text-error"}],[o,d]),u=a==="creator"||a==="admin",N=x.useMemo(()=>[{key:"manage-members",label:"Manage Members / Invite",icon:I,onClick:c,visible:()=>u},{key:"delete-or-leave",label:a==="creator"?"Delete Book":"Leave Book",icon:a==="creator"?W:F,onClick:s=>{a==="creator"?n?.(s):h?.(s)},visible:()=>a==="creator"?!!n:!!h,className:"text-error"}],[c,h,n,a,u]),v=x.useCallback(()=>{U.get(route("books.show",l.id))},[l.id]),k=x.useCallback(s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),v())},[v]),w=()=>{switch(a){case"creator":return"badge-primary";case"admin":return"badge-secondary";default:return"badge-neutral"}},C=()=>{switch(a){case"creator":return"Creator";case"admin":return"Admin";default:return"Member"}};return e.jsx("div",{className:"card bg-base-200 shadow-xl hover:shadow-2xl transition-shadow cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary/60",role:"button",tabIndex:0,"aria-label":`Open transactions for book ${l.name}`,onClick:v,onKeyDown:k,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-start",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-col w-[95%]",children:[e.jsxs("h3",{className:"card-title text-lg",children:[l.name,e.jsx("div",{className:`badge ${w()}`,children:C()})]}),e.jsx("p",{className:"text-base-content/60 text-sm h-12 line-clamp-2",children:l.description})]}),e.jsxs("div",{className:"w-[5%] dropdown dropdown-end",onClick:s=>s.stopPropagation(),onKeyDown:s=>s.stopPropagation(),children:[e.jsx(te,{tabIndex:0,role:"button","aria-haspopup":"menu","aria-label":"Book menu",className:"size-6 btn btn-ghost btn-sm btn-circle"}),e.jsx("ul",{className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",role:"menu",children:N.filter(s=>!s.visible||s.visible()).map(s=>e.jsx("li",{role:"none",children:e.jsxs("button",{onClick:f=>{f.stopPropagation(),s.onClick(l)},className:s.className,role:"menuitem",type:"button",children:[e.jsx(s.icon,{size:16}),s.label]})},s.key))})]})]}),l.budget&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs lg:text-sm mb-1",children:[e.jsx("span",{children:"Budget"}),e.jsx("span",{children:M(l.budget)})]}),e.jsx("progress",{className:"progress progress-primary w-full",value:d,max:l.budget,"aria-label":`Budget spent: ${b}%`}),e.jsxs("div",{className:"flex justify-between text-xs text-base-content/60 mt-1",children:[e.jsxs("span",{children:["Spent: ",M(d)]}),e.jsxs("span",{children:[b,"%"]})]})]}),e.jsx("div",{className:"flex gap-6",children:g.map(s=>e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("div",{className:`text-lg font-semibold ${s.colorClass}`,children:M(s.value)}),e.jsx("div",{className:`flex items-center ${s.colorClass}`,children:e.jsx(s.icon,{size:20,"aria-label":s.label})})]},s.key))})]})})};function Me(){const[l,i]=x.useState(!1),[t,c]=x.useState(!1),[h,n]=x.useState(null),a=Y.filter(m=>m.members.some(o=>o.user.id===y.id));return e.jsxs(H,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-base-content/90",children:"Dashboard"}),children:[e.jsx(K,{title:"Dashboard"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-base-content",children:["Selamat datang kembali, ",y.name]}),e.jsx("p",{className:"text-base-content/60 mt-1",children:"Kelola keuangan kolaboratif Anda"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex gap-2",children:[e.jsxs("button",{className:"btn btn-primary gap-2",onClick:()=>i(!0),children:[e.jsx(D,{size:20}),"Buat Buku"]}),e.jsxs("button",{className:"btn btn-secondary gap-2",onClick:()=>c(!0),children:[e.jsx(ie,{size:20}),"Gabung"]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-base-content mb-4",children:"Buku Keuangan Anda"}),a.length===0?e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body text-center py-12",children:[e.jsx(S,{size:64,className:"mx-auto text-base-content/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-base-content mb-2",children:"Belum ada buku keuangan"}),e.jsx("p",{className:"text-base-content/60 mb-6",children:"Buat buku keuangan pertama Anda untuk mulai berkolaborasi dengan orang lain"}),e.jsxs("button",{className:"btn btn-primary gap-2",onClick:()=>i(!0),children:[e.jsx(D,{size:20}),"Buat Buku Pertama Anda"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(m=>e.jsx(ge,{book:m,currentUserId:y.id,transactions:Q,onManageMembers:o=>n(o),onLeave:o=>console.log("Leave book (member/admin) not implemented yet",o.id),onDelete:o=>console.log("Delete book (creator) not implemented yet",o.id)},m.id))})]})]}),e.jsx(be,{isOpen:l,onClose:()=>i(!1)}),e.jsx(pe,{isOpen:t,onClose:()=>c(!1)}),e.jsx(je,{isOpen:!!h,onClose:()=>n(null),book:h})]})}export{Me as default};
